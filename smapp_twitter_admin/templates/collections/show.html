{% extends "layout.html" %}
{% block body %}
    <h1>{{ collection_name }}</h1>
    <div class="well">
      <h4>Latest hits</h4>
      <span class="pull-right muted">Total: {{ "{:,}".format(count) }}</span>
      <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>Time</th>
                <th>User</th>
                <th>Text</th>
            </tr>
        </thead>
        {% for tweet in latest_tweets %}
            <tr>
                <td>{{ tweet['timestamp'] }}</td>
                <td><a href="https://twitter.com/{{ tweet['user']['screen_name'] }}">@{{ tweet['user']['screen_name'] }}</a></td>
                <td>{{ tweet['text'] }}</td>
            </tr>
        {% endfor %}
      </table>
    </div>

    <div class="well">
      <h3>Filter Criteria</h3>
      <span class="pull-right muted">Count: {{ "{:,}".format(filter_criteria.count()) }}</span>
      <table class="table table-striped table-condensed">
        <thead>
            <tr>
              <th>Filter Type</th>
              <th>Keyword</th>
              <th>Active</th>
              <th>Date Added</th>
              <th></th>
              <th></th>
            </tr>
        </thead>
        {% for fc in filter_criteria %}
            <tr>
              <td>{{ fc['filter_type'] }}</td>
              <td>{{ fc['value'] }}</td>
              <td>{{ fc['active'] }}</td>
              <td>{{ fc['date_added'] }}</td>
              <td>
                <a href="{{ url_for('filter_criteria_show', collection_name=collection_name, id=fc['_id']) }}"><button class="btn btn-small btn-primary" type="button">Edit</button></a>
              </td>
              <td>
                <form action="{{ url_for('filter_criteria_delete', collection_name=collection_name, id=fc['_id']) }}" method="POST">
                  <input type="submit" value="Delete" class="btn btn-small btn-danger" />
                </form>
              </td>
            </tr>
        {% endfor %}
      </table>
    </div>
{% endblock %}